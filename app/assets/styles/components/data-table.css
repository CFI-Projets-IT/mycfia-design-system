/**
 * DataTable Component - Tableau de donn√©es pour chat IA
 * Compatible th√®mes : light, dark-blue, dark-red
 * Responsive avec scroll horizontal mobile
 */

/* ====================================
   1. Container et Structure Base
   ==================================== */

.chat-datatable {
    margin: 1rem 0;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.chat-datatable .table {
    margin-bottom: 0;
    font-size: 0.9375rem;
    background-color: #FFFFFF;
}

/* ====================================
   2. Headers (Thead)
   ==================================== */

.chat-datatable thead {
    background: linear-gradient(90deg, #183E82 0%, #1E4A92 100%);
    color: #FFFFFF;
}

.chat-datatable thead th {
    padding: 1rem 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    font-size: 0.8125rem;
    letter-spacing: 0.5px;
    border: none;
    vertical-align: middle;
}

/* ====================================
   3. Body (Tbody)
   ==================================== */

.chat-datatable tbody tr {
    transition: background-color 0.2s ease;
}

.chat-datatable tbody td {
    padding: 0.875rem 0.75rem;
    vertical-align: middle;
    border-color: #E0E0E0;
}

/* Effet hover sur les lignes */
.chat-datatable .table-hover tbody tr:hover {
    background-color: rgba(24, 62, 130, 0.05);
    cursor: pointer;
}

/* ====================================
   4. Liens Cliquables (Detail Link)
   ==================================== */

.chat-datatable .detail-link {
    color: #0D6EFD;
    font-weight: 600;
    transition: all 0.2s ease;
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
}

.chat-datatable .detail-link:hover {
    color: #0A58CA;
    text-decoration: underline !important;
}

/* Ic√¥ne pour les liens (apr√®s le texte) */
.chat-datatable .detail-link::after {
    content: 'üìÑ';
    font-size: 0.875rem;
    opacity: 0.7;
}

/* ====================================
   5. Footer (Total Row)
   ==================================== */

.chat-datatable tfoot {
    background: linear-gradient(90deg, #F8F9FA 0%, #E9ECEF 100%);
    border-top: 2px solid #183E82;
}

.chat-datatable .table-total td {
    padding: 1rem 0.75rem;
    font-weight: 700;
    font-size: 1rem;
    color: #183E82;
    border: none;
}

.chat-datatable .table-total td:first-child {
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* ====================================
   6. Colonne Export (PDF & Excel)
   ==================================== */

.chat-datatable .export-column {
    width: 100px;
    text-align: center;
    vertical-align: middle;
}

.chat-datatable .export-column .btn {
    padding: 0.25rem 0.5rem;
    font-size: 0.875rem;
    border-radius: 4px;
    transition: all 0.2s ease;
}

.chat-datatable .export-column .btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    pointer-events: none;
}

.chat-datatable .export-column .btn i {
    font-size: 1rem;
}

/* Bouton PDF */
.chat-datatable .export-column .btn-outline-secondary:not(:disabled):hover {
    background-color: #6c757d;
    color: #fff;
}

/* Bouton Excel */
.chat-datatable .export-column .btn-outline-success:not(:disabled):hover {
    background-color: #198754;
    color: #fff;
}

/* Ancien style PDF - conserv√© pour compatibilit√© */
.chat-datatable .pdf-column {
    width: 50px;
    text-align: center;
}

.chat-datatable .pdf-icon-placeholder {
    display: inline-block;
    font-size: 1.25rem;
    opacity: 0.5;
    cursor: not-allowed;
}

.chat-datatable .pdf-icon-placeholder i {
    pointer-events: none;
}

/* ====================================
   7. Th√®me Light (par d√©faut)
   ==================================== */

.theme-light .chat-datatable .table {
    background-color: #FFFFFF;
    color: #212529;
}

.theme-light .chat-datatable thead {
    background: linear-gradient(90deg, #183E82 0%, #1E4A92 100%);
    color: #FFFFFF;
}

.theme-light .chat-datatable tbody tr:hover {
    background-color: rgba(24, 62, 130, 0.05);
}

.theme-light .chat-datatable tfoot {
    background: linear-gradient(90deg, #F8F9FA 0%, #E9ECEF 100%);
}

/* ====================================
   8. Th√®me Dark Blue
   ==================================== */

body.theme-dark-blue .chat-datatable .table {
    background-color: rgba(255, 255, 255, 0.05);
    color: #FFFFFF;
}

body.theme-dark-blue .chat-datatable thead {
    background: linear-gradient(90deg, #5FA8D3 0%, #4A8FC7 100%);
    color: #FFFFFF;
}

body.theme-dark-blue .chat-datatable tbody td {
    border-color: rgba(95, 168, 211, 0.2);
}

body.theme-dark-blue .chat-datatable tbody tr:hover {
    background-color: rgba(95, 168, 211, 0.1);
}

body.theme-dark-blue .chat-datatable tfoot {
    background: rgba(95, 168, 211, 0.15);
    border-top: 2px solid #5FA8D3;
}

body.theme-dark-blue .chat-datatable .table-total td {
    color: #FFFFFF;
}

body.theme-dark-blue .chat-datatable .detail-link {
    color: #5FA8D3;
}

body.theme-dark-blue .chat-datatable .detail-link:hover {
    color: #7CBDE0;
}

/* ====================================
   9. Th√®me Dark Red
   ==================================== */

body.theme-dark-red .chat-datatable .table {
    background-color: rgba(255, 255, 255, 0.05);
    color: #FFFFFF;
}

body.theme-dark-red .chat-datatable thead {
    background: linear-gradient(90deg, #D35F8D 0%, #C74D7D 100%);
    color: #FFFFFF;
}

body.theme-dark-red .chat-datatable tbody td {
    border-color: rgba(211, 95, 141, 0.2);
}

body.theme-dark-red .chat-datatable tbody tr:hover {
    background-color: rgba(211, 95, 141, 0.1);
}

body.theme-dark-red .chat-datatable tfoot {
    background: rgba(211, 95, 141, 0.15);
    border-top: 2px solid #D35F8D;
}

body.theme-dark-red .chat-datatable .table-total td {
    color: #FFFFFF;
}

body.theme-dark-red .chat-datatable .detail-link {
    color: #D35F8D;
}

body.theme-dark-red .chat-datatable .detail-link:hover {
    color: #E077A3;
}

/* ====================================
   10. Responsive Design
   ==================================== */

/* Mobile (< 576px) */
@media (max-width: 575.98px) {
    .chat-datatable {
        font-size: 0.8125rem;
    }

    .chat-datatable thead th,
    .chat-datatable tbody td,
    .chat-datatable .table-total td {
        padding: 0.625rem 0.5rem;
        font-size: 0.75rem;
    }

    /* Scroll horizontal pour tableaux larges */
    .chat-datatable.table-responsive {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }

    .chat-datatable .table {
        min-width: 600px; /* Force largeur minimale pour scroll */
    }
}

/* Tablet (576px - 991px) */
@media (min-width: 576px) and (max-width: 991.98px) {
    .chat-datatable {
        font-size: 0.875rem;
    }

    .chat-datatable thead th,
    .chat-datatable tbody td {
        padding: 0.75rem 0.625rem;
    }
}

/* ====================================
   11. Animations
   ==================================== */

.chat-datatable {
    animation: tableSlideIn 0.3s ease-out;
}

@keyframes tableSlideIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ====================================
   12. Accessibility
   ==================================== */

/* Focus visible pour navigation clavier */
.chat-datatable .detail-link:focus-visible {
    outline: 2px solid #0D6EFD;
    outline-offset: 2px;
    border-radius: 2px;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
    .chat-datatable .table {
        border: 2px solid currentColor;
    }

    .chat-datatable thead th {
        border-bottom: 2px solid currentColor;
    }

    .chat-datatable tbody td {
        border: 1px solid currentColor;
    }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
    .chat-datatable {
        animation: none;
    }

    .chat-datatable tbody tr,
    .chat-datatable .detail-link {
        transition: none;
    }
}
