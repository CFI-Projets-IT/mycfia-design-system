<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}myCFiia{% endblock %}</title>
    <link rel="icon" href="{{ asset('images/logo_picto.svg') }}" type="image/svg+xml">

    {% block stylesheets %}
        {{ importmap('app') }}
    {% endblock %}
</head>
<body class="theme-{{ app.user ? app.user.theme : 'light' }}">
    <div class="home-layout">
        {# Sidebar gauche #}
        <aside class="home-sidebar">
            <div class="sidebar-header">
                <img src="{{ asset('images/logo.svg') }}" alt="myCFiia" class="sidebar-logo">
            </div>

            <nav class="sidebar-nav">
                {# Section Favoris (collapsible avec fond) #}
                <div class="nav-section">
                    <div class="nav-section-title-pill" data-bs-toggle="collapse" data-bs-target="#favorisSection" aria-expanded="true">
                        <div class="d-flex align-items-center gap-2">
                            <i class="bi bi-star"></i>
                            <span>Favoris</span>
                        </div>
                        <i class="bi bi-chevron-down"></i>
                    </div>
                    <div class="collapse show" id="favorisSection">
                        <ul class="nav-list">
                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    <span>Factures...</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    <span>Commandes...</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    <span>Stocks...</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    <span>Aide-moi à...</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>

                {# Section Historique (collapsible avec fond) #}
                <div class="nav-section">
                    <div class="nav-section-title-pill" data-bs-toggle="collapse" data-bs-target="#historiqueSection" aria-expanded="false">
                        <div class="d-flex align-items-center gap-2">
                            <i class="bi bi-clock-history"></i>
                            <span>Historique</span>
                        </div>
                        <i class="bi bi-chevron-down"></i>
                    </div>
                    <div class="collapse" id="historiqueSection">
                        <ul class="nav-list">
                            <li class="nav-item">
                                <a href="#" class="nav-link nav-link-small">
                                    <span>Dernière conversation (il y a 2h)</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link nav-link-small">
                                    <span>Factures janvier 2025 (hier)</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link nav-link-small">
                                    <span>Analyse stocks (3 jours)</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link nav-link-small">
                                    <span>Rapport commandes (1 sem.)</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link nav-link-small">
                                    <span>Export données (2 sem.)</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>

            {# Footer avec Paramètres, Mon compte, Quitter #}
            <div class="sidebar-footer">
                <a href="#" class="sidebar-footer-link">
                    <i class="bi bi-gear"></i>
                    <span>Paramètres</span>
                </a>
                <a href="#" class="sidebar-footer-link">
                    <i class="bi bi-person-circle"></i>
                    <span>Mon compte</span>
                </a>
                <a href="{{ path('app_logout') }}" class="sidebar-footer-link">
                    <i class="bi bi-box-arrow-right"></i>
                    <span>Quitter</span>
                </a>
            </div>
        </aside>

        {# Zone principale #}
        <main class="home-main">
            {# Header avec logo centré et ThemeSelector #}
            <header class="home-header">
                <div class="header-content">
                    <div class="header-left">
                        {# Espace vide pour équilibrer #}
                    </div>

                    <div class="header-center">
                        <img src="{{ asset('images/logo.svg') }}" alt="myCFiia" class="header-logo">
                    </div>

                    <div class="header-right">
                        {{ component('ThemeSelector') }}
                        <a href="#" class="btn btn-link text-white">
                            <i class="bi bi-box-arrow-up-right"></i>
                            Retour vers MyCFi
                        </a>
                    </div>
                </div>
            </header>

            {# Contenu de la page #}
            <div class="home-content">
                {% block content %}{% endblock %}
            </div>
        </main>
    </div>

    {% block javascripts %}
        {{ importmap('app') }}
    {% endblock %}
</body>
</html>
